# Интеграция сборника "Хайку о весне"

## Описание
Добавлена поддержка сборника "Хайку о весне" от 86 поэтов (октябрь 2021-2025).

## Файлы

### Данные
- `data/vesna.json` - структурированный JSON с 86 авторами и их стихами
- `data/vesna_raw_min.txt` - исходный текстовый файл
- `parse_vesna_txt.py` - скрипт для парсинга txt в json

### Код бота
- `bot/vesna86.py` - модуль для работы с данными vesna.json
- `bot/t_bot.py` - добавлен метод `get_vesna86(params)` и команда `/vesna`
- `bot/description.py` - добавлено описание команды `/vesna`

## Структура данных vesna.json

```json
{
  "01": {
    "author": "Ореховая Соня (София Русинова)",
    "author_info": "(14 июля 1965 — 15 января 2005)",
    "poems": [
      "текст стиха 1",
      "текст стиха 2",
      ...
    ]
  },
  "02": { ... },
  ...
  "86": { ... }
}
```

## Использование

### Команда бота
- `/vesna` - **1 случайный стих** случайного автора
- `/vesna 18` - **ВСЕ стихи** автора #18 (Мацусита Конобуки) с разделителем
- `/vesna 9` - **ВСЕ стихи** автора #9 (Сергей Курбатов) с разделителем

### Логика вывода
1. **Без параметра** (`/vesna`): выводит 1 случайный стих случайного автора
2. **С параметром** (`/vesna 18`): выводит ВСЕ стихи указанного автора, разделенные `------`

### Программный доступ

```python
from bot.vesna86 import find_vesna_haiku

# Случайный стих
result = find_vesna_haiku()
if result:
    text, _ = result
    print(text)

# Стих конкретного автора
result = find_vesna_haiku('18')
if result:
    text, _ = result
    print(text)
```

## Формат вывода

### Без параметра (1 стих + весенняя картинка):
```
шелест дождя
тут и там опадает
яблоневый цвет

Мацусита Конобуки
https://thumb.cloud.mail.ru/weblink/thumb/xw1/gzzE/11DsMfgaq/20160510.jpg
```

### С параметром (все стихи + весенняя картинка):
```
шелест дождя
тут и там опадает
яблоневый цвет
------
эй трясогузка
от холода ли дрожишь
на проталинах

Мацусита Конобуки
https://thumb.cloud.mail.ru/weblink/thumb/xw1/gzzE/11DsMfgaq/20160510.jpg
```

или с датами (на отдельной строке):

```
на своей волне —
складываю кораблик
из свежей газеты
------
Скрип половицы —
Тенью легла на порог
Старая вишня.
------
совсем немного
о прошедшем дне —
букет сирени

Сергей Курбатов
(29 августа 1971 — 2 июня 2023)
https://thumb.cloud.mail.ru/weblink/thumb/xw1/gzzE/11DsMfgaq/20160315.jpg
```

### Весенние картинки
К каждому стиху добавляется случайная картинка из весеннего периода (март-май) календаря хайку 2016 года.

**Управление картинками:**
- Переменная окружения `VESNA_IMAGE_ENABLED` (yes/no)
- По умолчанию: `yes` (включено)
- Для отключения: установите `VESNA_IMAGE_ENABLED=no`
- Требуется также `CALENDAR_IMAGE_HOST` для формирования URL

## Авторы
Всего 86 авторов, включая:
- Ореховая Соня (София Русинова)
- Талеко (Коробова Татьяна)
- Сергоша (Сергей Золотухин)
- Алексей Грохотов
- Мацусита Конобуки
- и другие...
